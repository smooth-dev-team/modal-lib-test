---
mode: "agent"
description: "実行フェーズ中にユーザーの指示どおりタスクを追加・削除・更新する汎用プロンプト"
---

# 処理フロー

1. **タスクファイルの読み込み**

    - `#copilot-workflow/tasks.md` を取得し、現行テーブルを解析します。

2. **ユーザー指示の解析**

    - 直後に投稿されたユーザーのメッセージを
        - `追加:` `更新:` `削除:` の 3 セクションに分類
        - 行単位で **タスク名 / 優先度 / 工数** を抽出（パイプ `|` 区切りを推奨）
        - 優先度・工数が省略された場合は既存値を維持、もしくはデフォルト（中 / M）を採用

3. **タスクテーブルの更新**

    - **追加** → 新規行を末尾に挿入し、優先度昇順・工数昇順で再ソート
    - **更新** → タスク名が一致する行を上書き
    - **削除** → タスク名が一致する行を削除
    - 変更後のテーブルを `#copilot-workflow/tasks.md` に **上書き保存**

4. **変更内容の提示 & 確認**

    - 更新前後の差分を 5 行以内にまとめて表示
    - ユーザーに確認：
        > 「タスクを更新しました。確定して次のステップに進みますか？」
    - **「はい」** なら更新をコミット
    - **「いいえ」** なら追加の指示を促し、再度ステップ 2 からやり直す

5. **ループ**
    - タスクファイルが再度変更されるまで、このプロンプトを再実行し同じフローを繰り返します。
